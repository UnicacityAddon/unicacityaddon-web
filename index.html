<!doctype html>
<html lang="de">
<head>
    <title>UnicacityAddon | UCA</title>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=chrome">
    <link rel="shortcut icon" href="common/img/UCLogo_new.png" type="image/x-icon">
    <link rel="stylesheet" href="common/css/master.css">
    <link rel="stylesheet" href="common/css/font.css">
    <script src="common/js/master.js" async></script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
</head>
<body>

<nav id="nav"></nav>

<video autoplay muted loop id="backgroundVideo">
    <source src="common/img/UnicacityAddonWebsiteBackground.mp4" type="video/mp4">
</video>

<div class="index-main">
    <div class="index-main-content">
        <p class="text-80-700">UnicacityAddon <span class="text-40-400">v<span name="latestVersion" style="color: var(--blue)"></span></span></p>
        <p class="text-25-300">
            by RettichLP and Dimiikou<br><br>
            This addon is a modification for <a class="link" href="http://unicacity.de/" target="_blank">UnicaCity</a>
            providing specialized<br>
            and nice-to-have features and utilities for everyday gameplay.
        </p>
        <p class="text-50-700" style="color: var(--blue);">#improveYourGame</p>
        <a id="downloadLink" href="https://github.com/UnicacityAddon/unicacityaddon-addon/releases/latest">
            <button class="button-download">Download</button>
        </a>
    </div>
</div>

<a href="#index-statistic">
    <div class="arrow">
        <svg>
            <polygon points="37.6,27.9 1.8,1.3 3.3,0 37.6,25.3 71.9,0 73.7,1.3 "/>
            <polygon points="37.6,45.8 0.8,18.7 4.4,16.4 37.6,41.2 71.2,16.4 74.5,18.7 "/>
            <polygon points="37.6,64 0,36.1 5.1,32.8 37.6,56.8 70.4,32.8 75.5,36.1 "/>
        </svg>
    </div>
</a>

<div id="index-statistic" class="index-statistic">
    <div class="index-statistic-grid">
        <div class="grid-a grid-center">
            <h2>Statistiken</h2>
        </div>
        <div class="grid-b grid-center">
            <h2>Spieleraktivität</h2>
        </div>
        <div class="grid-c grid-center">
            <h2>Versionsverteilung</h2>
        </div>

        <div class="grid-d">
            <table style="border: none; width: 100%">
                <tr>
                    <td class="text-20-400">Aktueller Main-Release:</td>
                    <td class="text-20-800" style="color: var(--blue); float: right;">v<span name="latestVersion"></span></td>
                </tr>
            </table>
            <br><br>
            <table style="border: none; width: 100%">
                <tr>
                    <td class="text-20-400">Spieleranzahl (gesamt):</td>
                    <td class="text-20-800" style="color: var(--blue); float: right;"><span id="totalClients"></span> Spieler</td>
                </tr>
                <tr>
                    <td class="text-20-400">Spieleranzahl (letzten 3 Tage):</td>
                    <td class="text-20-800" style="color: var(--blue); float: right;"><span id="activeClients"></span> Spieler</td>
                </tr>
                <tr>
                    <td class="text-20-400">Spieleranzahl (inaktiv):</td>
                    <td class="text-20-800" style="color: var(--blue); float: right;"><span id="inactiveClients"></span> Spieler</td>
                </tr>
            </table>
            <br><br>
            <table style="border: none; width: 100%">
                <tr>
                    <td class="text-20-400">API Anfragen (gesamt):</td>
                    <td class="text-20-800" style="color: var(--blue); float: right;"><span id="requests"></span> Requests</td>
                </tr>
            </table>
        </div>
        <div class="grid-e grid-center">
            <div id="player_activity_chart" style="width: 300px; height: 300px"></div>
        </div>
        <div class="grid-f grid-center">
            <div id="version_overview_chart" style="width: 300px; height: 300px"></div>
        </div>
    </div>
</div>

<div class="index-history">
    <div class="index-history-grid">
        <div class="grid-a">
            <img src="common/img/RettichByEmii.png" alt="RettichLP">
        </div>
        <div class="grid-b">
            <p class="text-40-400">Entstehungsgeschichte</p>
            <p class="text-20-300">
                Für Unicacity wurde ein Update auf eine neuere Minecraft Version angekündigt. Zu diesem Zeitpunkt gab es eine Modifikation, die von vielen Spielern genutzt wurde. Diese vereinfachte das Spielerlebnis.<br>
                Ab dem Moment kam Dimiikou und RettichLP die Idee, für die neue Version einen Mod zur Verfügung zu stellen. Das hatte nur einen Haken. Geplant war ein Update auf die 1.16.5 und viele Spieler nutzen Labymod auf Unicacity. Jedoch unterstützt Labymod mit der 1.16.5 kein Forge. Somit kam nur ein Labymod-Addon in Frage.<br>
                Das Addon war relativ schnell erstellt und wurde auch von Labymod verifiziert und ist seit dem in der Addon-Liste von Labymod.<br>
                Irgendwann ist der Server, von dem UCUtils seine Daten bekam, nicht mehr erreichbar gewesen. Die Folge war, dass manche Spieler keine Befehle mehr nutzen konnten und Fraktionsdaten nicht geladen wurden.
            </p>
        </div>
        <div class="grid-c">
            <p class="text-20-300">
                Es wurde eine Alternative benötigt und wir sahen unsere Chance!<br>
                Wir entschieden uns, das Addon, das bereits für die 1.16.5 funktionierte, auf die 1.12.2 umzuschreiben und zur Verfügung zu stellen.<br>
                Nach und nach kamen immer mehr Funktionen dazu, die von unserem Addon und UCUtils übernommen wurden. Ab der Addon-Version 1.5.0 haben wir sogar einen Server und stellen Daten über eine API zur Verfügung.<br>
                Mittlerweile ist unser Addon von fast jeder Fraktion anerkannt und wird von über 200 Spielern genutzt.<br><br>
                Danke für Eure Unterstützung! :D
            </p>
        </div>
    </div>
</div>

<div id="footer"></div>

</body>
</html>

<script>
    async function fetchAndDisplayContent() {
        try {
            const response = await fetch('https://rettichlp.de:8443/unicacityaddon/v1/dhgpsklnag2354668ec1d905xcv34d9bdee4b877/mgmt');
            const json = await response.json();

            const latestVersion = json.latestVersion;
            const totalClients = json.totalClients;
            const activeClients = json.activeClients;
            const inactiveClients = totalClients - activeClients;
            const requests = new Intl.NumberFormat('de-DE').format(json.requests);

            document.getElementsByName("latestVersion").forEach(element => element.innerText = latestVersion);
            document.getElementById("downloadLink").setAttribute("href", "https://github.com/UnicacityAddon/unicacityaddon-addon/releases/download/v" + latestVersion + "/unicacityaddon-" + latestVersion + ".jar");

            document.getElementById("totalClients").innerText = totalClients;
            document.getElementById("activeClients").innerText = activeClients;
            document.getElementById("inactiveClients").innerText = inactiveClients;
            document.getElementById("requests").innerText = requests;

            google.charts.load('current', { packages: ['corechart'] });
            google.charts.setOnLoadCallback(() => {
                drawActivePlayersChart(activeClients, inactiveClients);
                drawVersionOverviewChart(json.versions);
            });

            function drawActivePlayersChart(active, inactive) {
                const activePlayersData = google.visualization.arrayToDataTable([
                    ['Status', 'Anzahl'],
                    ['Aktive Spieler', active],
                    ['Inaktive Spieler', inactive]
                ]);

                const options = {
                    pieHole: 0.4,
                    backgroundColor: 'none',
                    legend: 'none',
                    chartArea: { top: 10, right: 10, bottom: 10, left: 10 },
                    pieSliceBorderColor: 'transparent'
                };

                const chart = new google.visualization.PieChart(document.getElementById('player_activity_chart'));
                chart.draw(activePlayersData, options);
            }

            function drawVersionOverviewChart(versionData) {
                const data = [['Version', 'Anzahl der Spieler']];
                versionData.forEach(version => {
                    data.push([version.version, version.users]);
                });

                const versionOverviewData = google.visualization.arrayToDataTable(data);

                const options = {
                    pieHole: 0.4,
                    backgroundColor: 'none',
                    legend: 'none',
                    chartArea: { top: 10, right: 10, bottom: 10, left: 10 },
                    pieSliceBorderColor: 'transparent'
                };

                const chart = new google.visualization.PieChart(document.getElementById('version_overview_chart'));
                chart.draw(versionOverviewData, options);
            }
        } catch (error) {
            console.error('Cannot fetch data:', error);
        }
    }
</script>